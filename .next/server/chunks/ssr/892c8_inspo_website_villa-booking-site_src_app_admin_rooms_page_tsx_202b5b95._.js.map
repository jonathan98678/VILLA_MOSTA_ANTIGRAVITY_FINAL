{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jonat/Desktop/Antigravity_inspo_website/villa-booking-site/src/app/admin/rooms/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Image from \"next/image\";\r\nimport { Plus, Edit2, Trash2, Save, X, Loader2 } from \"lucide-react\";\r\n\r\ninterface Room {\r\n    id: string;\r\n    name: string;\r\n    slug: string;\r\n    short_description: string;\r\n    base_price: number;\r\n    max_guests: number;\r\n    images: string[];\r\n    features: string[];\r\n}\r\n\r\nexport default function AdminRoomsPage() {\r\n    const [rooms, setRooms] = React.useState<Room[]>([]);\r\n    const [loading, setLoading] = React.useState(true);\r\n    const [editingId, setEditingId] = React.useState<string | null>(null);\r\n    const [editForm, setEditForm] = React.useState<Partial<Room>>({});\r\n    const [saving, setSaving] = React.useState(false);\r\n\r\n    // Load rooms from API\r\n    React.useEffect(() => {\r\n        async function fetchRooms() {\r\n            try {\r\n                const res = await fetch(\"/api/admin/rooms\");\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setRooms(data);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching rooms:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        fetchRooms();\r\n    }, []);\r\n\r\n    const handleEdit = (room: Room) => {\r\n        setEditingId(room.id);\r\n        setEditForm(room);\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (editingId && editForm) {\r\n            setSaving(true);\r\n            try {\r\n                const res = await fetch(\"/api/admin/rooms\", {\r\n                    method: \"PUT\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ id: editingId, ...editForm }),\r\n                });\r\n\r\n                if (res.ok) {\r\n                    setRooms(rooms.map(r => r.id === editingId ? { ...r, ...editForm } as Room : r));\r\n                    setEditingId(null);\r\n                    setEditForm({});\r\n                } else {\r\n                    alert(\"Failed to save room\");\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error saving room:\", error);\r\n                alert(\"Failed to save room\");\r\n            } finally {\r\n                setSaving(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setEditingId(null);\r\n        setEditForm({});\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (confirm(\"Are you sure you want to delete this room?\")) {\r\n            try {\r\n                const res = await fetch(\"/api/admin/rooms\", {\r\n                    method: \"DELETE\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ id }),\r\n                });\r\n\r\n                if (res.ok) {\r\n                    setRooms(rooms.filter(r => r.id !== id));\r\n                } else {\r\n                    alert(\"Failed to delete room\");\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error deleting room:\", error);\r\n                alert(\"Failed to delete room\");\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-stone-400\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"bg-white border-b border-stone-200 px-6 py-4 flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-xl font-semibold text-stone-800\">Rooms</h1>\r\n                    <p className=\"text-stone-500 text-sm\">Manage your room listings</p>\r\n                </div>\r\n                <button className=\"flex items-center gap-2 bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition-colors\">\r\n                    <Plus className=\"w-4 h-4\" />\r\n                    <span>Add Room</span>\r\n                </button>\r\n            </header>\r\n\r\n            <div className=\"p-6\">\r\n                {rooms.length === 0 ? (\r\n                    <div className=\"bg-white rounded-lg shadow-sm p-8 text-center\">\r\n                        <p className=\"text-stone-500\">No rooms found. Run the database seed to add initial rooms.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-stone-50\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase\">Room</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase\">Price/Night</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase\">Max Guests</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-stone-100\">\r\n                                {rooms.map((room) => (\r\n                                    <tr key={room.id} className=\"hover:bg-stone-50\">\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"relative w-16 h-12 rounded overflow-hidden flex-shrink-0 bg-stone-100\">\r\n                                                    {room.images?.[0] && (\r\n                                                        <Image\r\n                                                            src={room.images[0]}\r\n                                                            alt={room.name}\r\n                                                            fill\r\n                                                            className=\"object-cover\"\r\n                                                        />\r\n                                                    )}\r\n                                                </div>\r\n                                                <div>\r\n                                                    {editingId === room.id ? (\r\n                                                        <input\r\n                                                            type=\"text\"\r\n                                                            value={editForm.name || \"\"}\r\n                                                            onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\r\n                                                            className=\"border border-stone-300 rounded px-2 py-1 text-sm w-full\"\r\n                                                        />\r\n                                                    ) : (\r\n                                                        <p className=\"font-medium text-stone-800\">{room.name}</p>\r\n                                                    )}\r\n                                                    <p className=\"text-stone-500 text-sm truncate max-w-xs\">{room.short_description}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            {editingId === room.id ? (\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={editForm.base_price || \"\"}\r\n                                                    onChange={(e) => setEditForm({ ...editForm, base_price: Number(e.target.value) })}\r\n                                                    className=\"border border-stone-300 rounded px-2 py-1 text-sm w-20\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-stone-800\">€{room.base_price}</span>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            {editingId === room.id ? (\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    value={editForm.max_guests || \"\"}\r\n                                                    onChange={(e) => setEditForm({ ...editForm, max_guests: Number(e.target.value) })}\r\n                                                    className=\"border border-stone-300 rounded px-2 py-1 text-sm w-16\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className=\"text-stone-600\">{room.max_guests}</span>\r\n                                            )}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {editingId === room.id ? (\r\n                                                    <>\r\n                                                        <button\r\n                                                            onClick={handleSave}\r\n                                                            disabled={saving}\r\n                                                            className=\"p-2 text-green-600 hover:bg-green-50 rounded disabled:opacity-50\"\r\n                                                        >\r\n                                                            {saving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Save className=\"w-4 h-4\" />}\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={handleCancel}\r\n                                                            className=\"p-2 text-stone-500 hover:bg-stone-100 rounded\"\r\n                                                        >\r\n                                                            <X className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <>\r\n                                                        <button\r\n                                                            onClick={() => handleEdit(room)}\r\n                                                            className=\"p-2 text-stone-500 hover:bg-stone-100 rounded\"\r\n                                                        >\r\n                                                            <Edit2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                        <button\r\n                                                            onClick={() => handleDelete(room.id)}\r\n                                                            className=\"p-2 text-red-500 hover:bg-red-50 rounded\"\r\n                                                        >\r\n                                                            <Trash2 className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    </>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n                    <p className=\"text-green-800 text-sm\">\r\n                        <strong>✓ Connected to Supabase:</strong> Room changes are saved to your database.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}